<!DOCTYPE html>

<html>

    <head>
        <meta charset="utf-8" />

        <link rel="stylesheet" href="popup.css" />

        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Comic+Neue&display=swap" rel="stylesheet">
    </head>

    <body>
        <!-- ACCEPT THE PERMISSIONS -->
        <div id="grant_permissions_page" class="page">
            <h1>Permissions</h1>
            <div id="terms">
                <p>Woof Wallet needs your permission to access some APIs:</p>
                <ol>
                    <li>dogechain.info to query your utxos</li>
                    <li>doginals.com to query your ordinals</li>
                    <li>api.blockchair.com to broadcast transactions</li>
                </ol>
                <p>The browser will show a pop-up when you click Request.</p>
            </div>
            <button id="accept_permissions_button">Request</button>
        </div>


        <!-- ACCEPT THE TERMS -->
        <div id="accept_terms_page" class="page">
            <h1>Legal stuff</h1>
            <div id="terms">
                <p>
                    By using Woof Wallet, you agree:
                    <ol>
                        <li>There may still be bugs or security vulnerabilities.</li>
                        <li>Funds or NFTs could be lost.</li>
                        <li>You will not store more than you are willing can lose.</li>
                        <li>You use it at your own risk. The author is not responsible for losses.</li>
                        <li>The author may update it anytime.</li>
                        <li>Your will secure your private keys and other credentials.</li>
                    </ol>
                </p>
            </div>
            <button id="accept_terms_button">Woof</button>
        </div>


        <!-- MAKE A NEW WALLET -->
        <div id="setup_page" class="page">
            <h1>Set up stuff</h1>
            <button id="new_wallet_button" class="setup_option">I don't have a wallet</button>
            <button id="import_wallet_button" class="setup_option">I already have a wallet</button>
        </div>


        <!-- GENERATE KEYS FOR A NEW WALLET -->
        <div id="create_page" class="page">
            <h1>Write this down</h1>
            <div id="mnemonic"></div>
            <button id="create_wallet_ok_button">OK I did</button>
        </div>


        <!-- IMPORT KEYS FROM AN EXISTING WALLET -->
        <div id="import_page" class="page">
            <h1>How to import</h1>
            <button id="import_private_key_button" class="setup_option">I have a private key</button>
            <button id="import_twelve_words_button" class="setup_option">I have 12 words</button>
        </div>


        <!-- IMPORT A PRIVATE KEY -->
        <div id="import_private_key_page" class="page">
            <h1>Paste your key</h1>
            <textarea id="private_key_textarea"></textarea>
            <button id="load_private_key_button">Load</button>
        </div>


        <!-- IMPORT A MNEMONIC -->
        <div id="import_twelve_words_page" class="page">
            <h1>Type your 12 words</h1>
            <textarea id="twelve_words_textarea"></textarea>
            <button id="load_twelve_words_button">Load</button>
        </div>


        <!-- VIEW ALL DOGINALS -->
        <div id="view_wallet_page" class="page">
            <div id="header">
                <div class="header_row">
                    <div id="address"></div>
                    <button id="copy_address_button" title="Copy address to clipboard"></button>
                    <button id="settings_button" title="Settings"></button>
                </div>
                <div class="header_row">
                    <span id="doge_balance">Loading...</span>
                </div>
                <div class="header_row">
                    <button id="receive_button">Receive</button>
                </div>
            </div>
            <div id="doginals">
                Loading...
            </div>
        </div>


        <!-- SETTINGS MENU -->
        <div id="settings_page" class="page">
            <h1>Settings</h1>
            <div class="settings_content">
                <button id="show_seed_phrase_button" class="settings_option">Show Seed Phrase</button>
                <button id="logout_button" class="settings_option">Logout</button>
                <button id="settings_back_button" class="settings_option">Back</button>
            </div>
        </div>


        <!-- PASSWORD PROMPT FOR SEED PHRASE -->
        <div id="password_prompt_page" class="page">
            <h1>Enter Password</h1>
            <p class="security_message">Please enter your password to view the seed phrase</p>
            <input id="password_input" type="password" placeholder="Enter password">
            <button id="confirm_password_button">Confirm</button>
            <button id="cancel_password_button">Cancel</button>
        </div>


        <!-- SHOW SEED PHRASE -->
        <div id="show_seed_page" class="page">
            <h1>Seed Phrase</h1>
            <div class="security_warning">
                <p>‚ö†Ô∏è Never share your seed phrase with anyone!</p>
                <p>Keep it safe and secure.</p>
            </div>
            <div id="seed_phrase_display"></div>
            <button id="copy_seed_button">Copy to Clipboard</button>
            <button id="seed_back_button">Back</button>
        </div>


        <!-- RECEIVE PAGE -->
        <div id="receive_page" class="page" role="main" aria-labelledby="receive_title">
            <h1 id="receive_title">Receive Dogecoin</h1>
            <div class="receive_content">
                <div class="address_section" role="region" aria-labelledby="address_heading">
                    <h2 id="address_heading">Your Wallet Address</h2>
                    <p class="instruction_text">Share this address to receive Dogecoin payments</p>
                    <div id="receive_address_display" 
                         role="textbox" 
                         aria-readonly="true" 
                         aria-label="Wallet address for receiving payments"
                         tabindex="0"></div>
                    <button id="copy_receive_address_button" 
                            class="copy_button"
                            aria-describedby="copy_help">
                        <span class="button_icon" aria-hidden="true">üìã</span>
                        Copy Address
                    </button>
                    <div id="copy_help" class="sr-only">Copies the wallet address to your clipboard</div>
                </div>
                <div class="qr_section" role="region" aria-labelledby="qr_heading">
                    <h2 id="qr_heading">QR Code</h2>
                    <p class="instruction_text">Scan this code with any QR scanner or wallet app</p>
                    <div id="qr_code_container" 
                         role="img" 
                         aria-label="QR code containing wallet address"
                         tabindex="0"></div>
                    <div id="qr_fallback" class="qr_fallback" style="display: none;">
                        <p>QR code could not be generated</p>
                        <p class="fallback_text">Use the address above instead</p>
                    </div>
                </div>
                <button id="receive_back_button" 
                        class="back_button"
                        aria-label="Go back to wallet overview">
                    <span class="button_icon" aria-hidden="true">‚Üê</span>
                    Back
                </button>
            </div>
        </div>


        <!-- VIEW A SPECIFIC DOGINAL -->
        <div id="view_doginal_page" class="page">
            <span id="doginal_inscription_number"></span>
            <div id="doginal_content"></div>
            <input id="doginal_address_input" placeholder="Enter address here" type="text"></input>
            <button id="doginal_send_button">Send</button>
        </div>


        <!-- AFTER SEND SCREEN -->
        <div id="sent_page" class="page">
            <h1 id="sent_message"></h1>
            <span id="sent_txid"></span>
        </div>


        <!-- ERROR SCREEN -->
        <div id="error_page" class="page">
            <h1>Bad shibe</h1>
            <span id="error_message"></span>
        </div>
    </body>

    <script src="lib/bitcore-lib-doge.js"></script>
    <script src="lib/bitcore-mnemonic.js"></script>
    <script src="lib/browser-polyfill.min.js"></script>
    <script src="lib/qrcode.min.js"></script>

    <script src="model.js"></script>
    <script src="popup.js"></script>

</html>