<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Woof Wallet - Secure Dogecoin and Doginals Web Wallet">
    <title>Woof Wallet</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Skip Navigation Links for Accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>
    <a href="#navigation" class="skip-link">Skip to navigation</a>
    
    <!-- Loading Screen -->
    <div id="loading_screen" class="screen active" role="main" aria-live="polite">
        <div class="loading-container">
            <div class="loading-spinner" aria-hidden="true"></div>
            <h2 id="loading-status">Loading Woof Wallet...</h2>
            <p class="sr-only">Please wait while the wallet application loads</p>
        </div>
    </div>

    <!-- Terms Acceptance Screen -->
    <div id="accept_terms_screen" class="screen" role="main">
        <div class="container">
            <div class="logo" aria-hidden="true">üêï</div>
            <h2>Welcome to Woof Wallet</h2>
            <div class="terms-content" role="complementary">
                <p>By using Woof Wallet, you acknowledge and agree:</p>
                <ul role="list">
                    <li role="listitem">This is experimental software that may contain bugs</li>
                    <li role="listitem">You are responsible for securing your private keys</li>
                    <li role="listitem">Funds or NFTs could be lost due to software issues</li>
                    <li role="listitem">Only store amounts you can afford to lose</li>
                    <li role="listitem">The developers are not liable for any losses</li>
                    <li role="listitem">You use this wallet at your own risk</li>
                </ul>
            </div>
            <button 
                id="accept_terms_button" 
                class="primary-button"
                aria-describedby="terms-description">
                I Understand - Continue
            </button>
            <div id="terms-description" class="sr-only">
                By clicking this button, you agree to all terms and conditions listed above
            </div>
        </div>
    </div>

    <!-- Wallet Setup Screen -->
    <div id="setup_screen" class="screen" role="main">
        <div class="container">
            <div class="logo" aria-hidden="true">üêï</div>
            <h2>Set Up Your Wallet</h2>
            <div class="setup-options" role="group" aria-label="Wallet setup options">
                <button id="new_wallet_button" class="setup-option" aria-describedby="new-wallet-desc">
                    <div class="option-icon" aria-hidden="true">üÜï</div>
                    <div class="option-text">
                        <h3>Create New Wallet</h3>
                        <p id="new-wallet-desc">Generate a new wallet with 12-word seed phrase</p>
                    </div>
                </button>
                <button id="import_wallet_button" class="setup-option" aria-describedby="import-wallet-desc">
                    <div class="option-icon" aria-hidden="true">üì•</div>
                    <div class="option-text">
                        <h3>Import Existing Wallet</h3>
                        <p id="import-wallet-desc">Import from seed phrase or private key</p>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Create Wallet Screen -->
    <div id="create_screen" class="screen">
        <div class="container">
            <h2>Your Recovery Phrase</h2>
            <div class="warning-box">
                <p><strong>‚ö†Ô∏è Important:</strong> Write down these 12 words in order and store them securely. This is the only way to recover your wallet!</p>
            </div>
            <div id="mnemonic_display" class="mnemonic-grid"></div>
            <button id="create_wallet_ok_button" class="primary-button">I've Written It Down</button>
        </div>
    </div>

    <!-- Password Setup Screen -->
    <div id="password_setup_screen" class="screen">
        <div class="container">
            <h2>üîí Secure Your Wallet</h2>
            <div class="password-setup-content">
                <div class="info-box">
                    <h3>Create a Strong Password</h3>
                    <p>This password will be required to view your seed phrase and private key from the settings menu.</p>
                </div>
                
                <div class="password-requirements">
                    <h4>Password Requirements:</h4>
                    <ul id="password_requirements_list">
                        <li id="req_length" class="requirement">
                            <span class="req-icon">‚ùå</span>
                            At least 8 characters long
                        </li>
                        <li id="req_uppercase" class="requirement">
                            <span class="req-icon">‚ùå</span>
                            Contains uppercase letter (A-Z)
                        </li>
                        <li id="req_lowercase" class="requirement">
                            <span class="req-icon">‚ùå</span>
                            Contains lowercase letter (a-z)
                        </li>
                        <li id="req_number" class="requirement">
                            <span class="req-icon">‚ùå</span>
                            Contains number (0-9)
                        </li>
                        <li id="req_special" class="requirement">
                            <span class="req-icon">‚ùå</span>
                            Contains special character (!@#$%^&*)
                        </li>
                    </ul>
                </div>

                <div class="input-group">
                    <label for="wallet_password_input">Create Password</label>
                    <div class="password-input-wrapper">
                        <input type="password" id="wallet_password_input" placeholder="Enter a strong password" aria-describedby="password_strength">
                        <button type="button" id="toggle_password_visibility" class="password-toggle" aria-label="Toggle password visibility">üëÅÔ∏è</button>
                    </div>
                    <div id="password_strength" class="password-strength">
                        <div class="strength-meter">
                            <div id="strength_bar" class="strength-bar"></div>
                        </div>
                        <span id="strength_text" class="strength-text">Password strength: Weak</span>
                    </div>
                </div>

                <div class="input-group">
                    <label for="wallet_password_confirm">Confirm Password</label>
                    <div class="password-input-wrapper">
                        <input type="password" id="wallet_password_confirm" placeholder="Confirm your password">
                        <button type="button" id="toggle_confirm_visibility" class="password-toggle" aria-label="Toggle password visibility">üëÅÔ∏è</button>
                    </div>
                    <div id="password_match_feedback" class="password-feedback"></div>
                </div>

                <div class="button-group">
                    <button id="setup_password_button" class="primary-button" disabled>Secure Wallet</button>
                    <button id="back_to_create_button" class="secondary-button">Back</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Import Options Screen -->
    <div id="import_options_screen" class="screen">
        <div class="container">
            <h2>Import Method</h2>
            <div class="import-options">
                <button id="import_seed_button" class="setup-option">
                    <div class="option-icon">üî§</div>
                    <div class="option-text">
                        <h3>12-Word Seed Phrase</h3>
                        <p>Import using your recovery phrase</p>
                    </div>
                </button>
                <button id="import_private_key_button" class="setup-option">
                    <div class="option-icon">üîë</div>
                    <div class="option-text">
                        <h3>Private Key</h3>
                        <p>Import using WIF private key</p>
                    </div>
                </button>
            </div>
            <button id="back_to_setup_button" class="secondary-button">Back</button>
        </div>
    </div>

    <!-- Import Seed Screen -->
    <div id="import_seed_screen" class="screen">
        <div class="container">
            <h2>Enter Your Seed Phrase</h2>
            <div class="seed-input-container">
                <textarea id="seed_textarea" placeholder="Enter your 12-word recovery phrase here..." rows="4"></textarea>
            </div>
            <button id="import_seed_ok_button" class="primary-button">Continue to Password Setup</button>
            <button id="back_to_import_options_button" class="secondary-button">Back</button>
        </div>
    </div>

    <!-- Import Private Key Screen -->
    <div id="import_key_screen" class="screen">
        <div class="container">
            <h2>Enter Private Key</h2>
            <div class="key-input-container">
                <textarea id="private_key_textarea" placeholder="Enter your WIF private key here..." rows="3"></textarea>
            </div>
            <button id="import_key_ok_button" class="primary-button">Continue to Password Setup</button>
            <button id="back_to_import_options_button2" class="secondary-button">Back</button>
        </div>
    </div>

    <!-- Wallet Lock Screen -->
    <div id="wallet_lock_screen" class="screen" role="main">
        <div class="container">
            <div class="logo" aria-hidden="true">üîí</div>
            <h2>Wallet Locked</h2>
            <div class="lock-content">
                <div class="info-box" role="alert">
                    <p>Your wallet has been locked for security. Enter your password to unlock and continue using your wallet.</p>
                </div>
                
                <form aria-label="Unlock wallet form">
                    <div class="input-group">
                        <label for="unlock_password_input">Password</label>
                        <div class="password-input-wrapper">
                            <input 
                                type="password" 
                                id="unlock_password_input" 
                                placeholder="Enter your password" 
                                aria-label="Password to unlock wallet"
                                aria-describedby="unlock-requirements unlock-password-error"
                                required
                                autocomplete="current-password">
                            <button 
                                type="button" 
                                id="toggle_unlock_visibility" 
                                class="password-toggle" 
                                aria-label="Toggle password visibility"
                                aria-pressed="false">
                                <span aria-hidden="true">üëÅÔ∏è</span>
                            </button>
                        </div>
                        <div id="unlock-requirements" class="sr-only">
                            Enter the password you set up when creating your wallet
                        </div>
                        <div id="unlock-password-error" class="form-error" role="alert" aria-live="polite"></div>
                    </div>

                    <div class="button-group" role="group" aria-label="Wallet unlock actions">
                        <button id="unlock_wallet_button" class="primary-button" disabled aria-describedby="unlock-status">
                            <span class="btn-text">Unlock Wallet</span>
                        </button>
                        <button id="logout_from_lock_button" class="secondary-button" type="button">
                            Logout
                        </button>
                    </div>
                </form>

                <div class="security-info" role="complementary">
                    <p><small>üí° Your wallet automatically locks after 15 minutes of inactivity for your security.</small></p>
                </div>
                
                <div id="unlock-status" class="sr-only" aria-live="polite"></div>
            </div>
        </div>
    </div>

    <!-- Main Wallet Screen -->
    <div id="wallet_screen" class="screen">
        <div class="wallet-container">
            <header class="wallet-header">
                <div class="wallet-info">
                    <div class="logo">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTIiIGN5PSIxMiIgcj0iMTEiIGZpbGw9IiNGRkNDMzMiLz4KPGJ0ZXh0IHg9IjEyIiB5PSIxNiIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEyIiBmaWxsPSIjMDAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj7wn5CVPC90ZXh0Pgo8L3N2Zz4K" alt="Woof Wallet Logo" class="logo-img">
                        <span class="wallet-title">[SCRYPT.FUN]</span>
                    </div>
                    <div id="wallet_address_short" class="wallet-address">Loading...</div>
                </div>
                <div class="balance">
                    <span id="doge_balance" class="balance-amount">0.00</span>
                    <span class="balance-currency">DOGE</span>
                </div>
            </header>

            <div class="action-buttons">
                <button id="quick_send_button" class="action-btn">Send</button>
                <button id="quick_receive_button" class="action-btn">Receive</button>
            </div>

            <nav class="tab-nav" role="tablist" aria-label="Wallet content tabs">
                <button id="tab_history" class="tab-btn active" data-tab="history" role="tab" aria-selected="true" aria-controls="history_tab">History</button>
                <button id="tab_doginals" class="tab-btn" data-tab="inscriptions" role="tab" aria-selected="false" aria-controls="inscriptions_tab">Inscriptions</button>
                <button id="tab_tokens" class="tab-btn" data-tab="tokens" role="tab" aria-selected="false" aria-controls="tokens_tab">Tokens</button>
            </nav>

            <main id="main-content" class="tab-content active" data-tab-content="history">
                <div id="history_tab" class="transaction-list">
                    <div id="history_container" class="history-list" role="log" aria-live="polite" aria-label="Transaction history">
                        <!-- Transaction items will be populated by JavaScript -->
                    </div>
                </div>
            </main>
            
            <main class="tab-content" data-tab-content="inscriptions" style="display: none;">
                <div id="doginals_tab">
                    <div class="tab-header">
                        <h3>Your Doginals Collection</h3>
                        <button 
                            id="refresh_doginals_button" 
                            class="refresh-button"
                            aria-label="Refresh doginals collection">
                            <span aria-hidden="true">üîÑ</span>
                        </button>
                    </div>
                    <div id="doginals_container" class="doginals-grid" role="grid" aria-label="Doginals collection">
                        <div class="loading-message" aria-live="polite">Loading doginals...</div>
                    </div>
                </div>
            </main>
            
            <main class="tab-content" data-tab-content="tokens" style="display: none;">
                <div id="tokens_tab">
                    <p>Tokens content goes here.</p>
                </div>
            </main>

            <!-- Settings button moved to header area -->
            <div class="header-settings">
                <button id="main_settings_button" class="settings-btn">‚öôÔ∏è Settings</button>
            </div>
        </div>
    </div>

    <!-- Send Tab Content (Hidden by default) -->
    <div id="send_tab" class="tab-content" role="tabpanel" aria-labelledby="tab_send" aria-hidden="true" style="display: none;">
        <form class="send-form" aria-label="Send Dogecoin form">
            <h3>Send Dogecoin</h3>
            <div class="form-group">
                <label for="send_address">Recipient Address</label>
                <input 
                    type="text" 
                    id="send_address" 
                    placeholder="Enter Dogecoin address..." 
                    aria-describedby="address-help address-error"
                    required
                    pattern="[DN][A-Za-z0-9]{33}"
                    title="Enter a valid Dogecoin address starting with D or N" />
                <div id="address-help" class="sr-only">
                    Enter the Dogecoin address where you want to send coins
                </div>
                <div id="address-error" class="form-error" role="alert" aria-live="polite"></div>
            </div>
            <div class="form-group">
                <label for="send_amount">Amount (DOGE)</label>
                <input 
                    type="number" 
                    id="send_amount" 
                    placeholder="0.00" 
                    step="0.01" 
                    min="0.01" 
                    aria-describedby="amount-help available-balance amount-error"
                    required />
                <div class="balance-info" id="available-balance">
                    Available: <span id="available_balance">0 DOGE</span>
                </div>
                <div id="amount-help" class="sr-only">
                    Enter the amount of Dogecoin to send
                </div>
                <div id="amount-error" class="form-error" role="alert" aria-live="polite"></div>
            </div>
            <div class="form-group">
                <label for="send_fee">Network Fee (DOGE)</label>
                <input 
                    type="number" 
                    id="send_fee" 
                    value="1.0" 
                    step="0.1" 
                    min="0.1" 
                    aria-describedby="fee-help fee-error"
                    required />
                <div id="fee-help" class="sr-only">
                    Network fee for processing the transaction
                </div>
                <div id="fee-error" class="form-error" role="alert" aria-live="polite"></div>
            </div>
            <button 
                id="send_doge_button" 
                class="primary-button" 
                type="submit"
                aria-describedby="send-warning">
                <span class="btn-text">Send DOGE</span>
            </button>
            <div id="send-warning" class="sr-only">
                Review all details before sending. Transactions cannot be reversed.
            </div>
        </form>
    </div>

    <!-- Doginal Detail Modal -->
    <div id="doginal_modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="doginal_title">Doginal Details</h3>
                <button id="close_doginal_modal" class="close-button">√ó</button>
            </div>
            <div class="modal-body">
                <div id="doginal_content_display" class="doginal-content"></div>
                <div class="doginal-info">
                    <div class="info-row">
                        <span class="info-label">Inscription:</span>
                        <span id="doginal_inscription_id" class="info-value"></span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Number:</span>
                        <span id="doginal_number" class="info-value"></span>
                    </div>
                </div>
                <div class="send-doginal-section">
                    <h4>Send This Doginal</h4>
                    <label for="doginal_send_address" class="sr-only">Recipient address for doginal</label>
                    <input type="text" id="doginal_send_address" placeholder="Enter recipient address..." aria-label="Recipient address for doginal" />
                    <button id="send_doginal_button" class="primary-button">Send Doginal</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Transaction Success Modal -->
    <div id="success_modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Transaction Sent!</h3>
                <button id="close_success_modal" class="close-button">√ó</button>
            </div>
            <div class="modal-body">
                <div class="success-icon">‚úÖ</div>
                <p>Your transaction has been broadcast to the network.</p>
                <div class="txid-container">
                    <label>Transaction ID:</label>
                    <div class="txid-display">
                        <span id="success_txid"></span>
                        <button id="copy_txid_button" class="copy-button">üìã</button>
                    </div>
                </div>
                <button id="view_explorer_button" class="secondary-button">View in Explorer</button>
            </div>
        </div>
    </div>

    <!-- Receive Modal -->
    <div id="receive_modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Receive Dogecoin</h3>
                <button id="close_receive_modal" class="close-button" aria-label="Close receive modal">√ó</button>
            </div>
            <div class="modal-body">
                <div class="receive-modal-content">
                    <div class="address-section">
                        <h4>Your Wallet Address</h4>
                        <p class="instruction-text">Share this address to receive Dogecoin payments</p>
                        <div class="address-container">
                            <div id="modal_wallet_address" 
                                 class="address-display" 
                                 role="textbox" 
                                 aria-readonly="true" 
                                 aria-label="Wallet address for receiving payments"
                                 tabindex="0">Loading...</div>
                            <button id="copy_modal_address_button" 
                                    class="copy-address-btn" 
                                    aria-describedby="modal_copy_help">
                                <span class="button-icon" aria-hidden="true">üìã</span>
                                Copy
                            </button>
                        </div>
                        <div id="modal_copy_help" class="sr-only">Copies the wallet address to your clipboard</div>
                    </div>
                    <div class="qr-section">
                        <h4>QR Code</h4>
                        <p class="instruction-text">Scan this code with any QR scanner or wallet app</p>
                        <div class="qr-container">
                            <div id="modal_qr_code" 
                                 role="img" 
                                 aria-label="QR code containing wallet address"
                                 tabindex="0"></div>
                            <div id="modal_qr_fallback" class="qr-fallback" style="display: none;">
                                <p>QR code could not be generated</p>
                                <p class="fallback-text">Use the address above instead</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Error Modal -->
    <div id="error_modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Error</h3>
                <button id="close_error_modal" class="close-button">√ó</button>
            </div>
            <div class="modal-body">
                <div class="error-icon">‚ùå</div>
                <p id="error_message">An error occurred</p>
                <button id="close_error_button" class="primary-button">OK</button>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings_modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Wallet Settings</h3>
                <button id="close_settings_modal" class="close-button" aria-label="Close settings">√ó</button>
            </div>
            <div class="modal-body">
                <div class="settings-menu">
                    <button id="main_show_seed_button" class="settings-option-button">
                        <span class="option-icon">üîë</span>
                        <div class="option-details">
                            <h4>Show Seed Phrase</h4>
                            <p>View your 12-word recovery phrase</p>
                        </div>
                    </button>
                    <button id="main_show_private_key_button" class="settings-option-button">
                        <span class="option-icon">üóùÔ∏è</span>
                        <div class="option-details">
                            <h4>Show Private Key</h4>
                            <p>View your wallet's private key</p>
                        </div>
                    </button>
                    <button id="main_logout_button" class="settings-option-button logout-option">
                        <span class="option-icon">üö™</span>
                        <div class="option-details">
                            <h4>Logout</h4>
                            <p>Sign out and clear wallet data</p>
                        </div>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Authentication Modal -->
    <div id="auth_modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="auth_modal_title">Authentication Required</h3>
                <button id="close_auth_modal" class="close-button" aria-label="Close authentication">√ó</button>
            </div>
            <div class="modal-body">
                <div class="auth-content">
                    <p id="auth_modal_message">Please enter your password to continue</p>
                    <div class="input-group">
                        <label for="main_password_input" class="sr-only">Password</label>
                        <input type="password" id="main_password_input" placeholder="Enter password" aria-label="Password">
                    </div>
                    <div class="modal-actions">
                        <button id="confirm_auth_button" class="primary-button" disabled><span class="btn-text">Confirm</span></button>
                        <button id="cancel_auth_button" class="secondary-button">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Sensitive Data Display Modal -->
    <div id="sensitive_data_modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="sensitive_data_title">Sensitive Information</h3>
                <button id="close_sensitive_modal" class="close-button" aria-label="Close">√ó</button>
            </div>
            <div class="modal-body">
                <div class="security-warning">
                    <div class="warning-icon">‚ö†Ô∏è</div>
                    <div class="warning-text">
                        <p><strong>Security Warning:</strong></p>
                        <p id="sensitive_warning_text">Never share this information with anyone!</p>
                    </div>
                </div>
                <div class="sensitive-data-container">
                    <div id="sensitive_data_display" class="data-display" aria-live="polite"></div>
                    <button id="copy_sensitive_data_button" class="copy-data-button">
                        <span class="button-icon">üìã</span>
                        Copy to Clipboard
                    </button>
                </div>
                <div class="modal-actions">
                    <button id="close_sensitive_data_button" class="primary-button">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="lib/bitcore-lib-doge.js"></script>
    <script src="lib/bitcore-mnemonic.js"></script>
    <script src="lib/qrcode.min.js"></script>
    <script src="js/api.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/wallet.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/keyboard-shortcuts.js"></script>
    <script src="js/ui-testing.js"></script>
    <script src="js/app.js"></script>

    <script>
        // Initialize tab switching for the new UI
        document.addEventListener('DOMContentLoaded', function() {
            // Tab button functionality
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const targetTab = btn.dataset.tab;
                    
                    // Remove active class from all tab buttons
                    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    
                    // Hide all tab content
                    document.querySelectorAll('.tab-content').forEach(content => {
                        content.style.display = 'none';
                        content.classList.remove('active');
                    });
                    
                    // Show the target tab content
                    const targetContent = document.querySelector(`[data-tab-content="${targetTab}"]`);
                    if (targetContent) {
                        targetContent.style.display = 'block';
                        targetContent.classList.add('active');
                    }
                });
            });

            // Bottom navigation functionality
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    
                    // Handle settings button specially
                    if (btn.dataset.section === 'settings' && btn.id === 'main_settings_button') {
                        // This will be handled by the existing settings button handler
                        return;
                    }
                });
            });
        });
    </script>
</body>
</html>